effect {
    Name: "Heal",
    Params: {
        amount: Number
    }
    Action: (targets, context) => {
        for target in targets {
        i=0;
        while (i++ < amount)
            target.Power += 1;
        };
    }
}

effect {
    Name: "Boost",
    Params: {
            amount: Number
        }
        Action: (targets, context) => {
            for target in targets {
            target.Power += amount;
        };
    }
}


effect {
    Name: "StealCard",
    Action: (targets, context) => {
        for target in targets {
            card = context.DeckOfPlayer(target.Owner).TopCard();
            context.DeckOfPlayer(context.CurrentPlayer).Add(card);
            context.DeckOfPlayer(target.Owner).Remove(card);
        }
    }
}

effect {
    Name: "Destroy",
    Action: (targets, context) => {
        for target in targets {
            context.Board.Remove(target);
            context.Graveyard.Add(target);
        };
    }
}

effect {
    Name: "Swap",
    Action: (targets, context) => {
        if targets.length == 2 {
            firstOwner = targets[0].Owner;
            secondOwner = targets[1].Owner;
            context.Board.Remove(targets[0]);
            context.Board.Remove(targets[1]);
            context.Board.Add(secondOwner, targets[0]);
            context.Board.Add(firstOwner, targets[1]);
        };
    }
}

effect {
    Name: "WeakenAll",
    Params: {
        amount: Number
    }
    Action: (targets, context) => {
        for target in context.Board.AllUnits() {
            target.Power -= amount;
        };
    }
}

effect {
    Name: "StrengthenAll",
    Params: {
        amount: Number
    }
    Action: (targets, context) => {
        for target in context.Board.AllUnits() {
            target.Power += amount;
        };
    }
}


card {
    Type: "Oro",
    Name: "Espada Sagrada",
    Faction: "Caballeros del Sol",
    Power: 10,
    Range: ["Melee"],
    OnActivation: [
        {
            Effect: {
                Name: "Damage",
                Params: { amount: 3 }
            },
            Selector: {
                Source: "field",
                Single: true,
                Predicate: (target) => target.Power > 5
            }
        }
    ],
    PostAction: {
        {
            Effect: "Draw",
            Selector: {
                Source: "deck",
                Single: true,
                Predicate: (target) => true
            }
        }
    ]
}

card {
    Type: "Plata",
    Name: "Guardián del Fuego",
    Faction: "Hermanos de la Llama",
    Power: 8,
    Range: ["Ranged", "Siege"],
    OnActivation: [
        {
            Effect: {
                Name: "Boost",
                Params: { amount: 5 }
            },
            Selector: {
                Source: "field",
                Single: true,
                Predicate: (target) => target.Power < 5
            }
        }
    ],
    PostAction: {]
}

card {
    Type: "Clima",
    Name: "Tormenta de Nieve",
    Faction: "Guardia de Invierno",
    Power: null,  // Clima cards have no Power
    Range: ["Ranged"],
    OnActivation: [
        {
            Effect: {
                Name: "WeakenAll",
                Params: { amount: 2 }
            },
            Selector: {
                Source: "field",
                Single: false,
                Predicate: (target) => target.Faction != "Guardia de Invierno"
            }
        }
    ],
    PostAction: []
}

card {
    Type: "Aumento",
    Name: "Furia del Dragón",
    Faction: "Clan del Dragón",
    Power: null,  // Aumento cards have no Power
    Range: ["Melee"],
    OnActivation: [
        {
            Effect: {
                Name: "StrengthenAll",
                Params: { amount: 4 }
            },
            Selector: {
                Source: "field",
                Single: false,
                Predicate: (target) => target.Faction == "Clan del Dragón"
            }
        }
    ],
    PostAction: []
}

card {
    Type: "Lider",
    Name: "Rey de la Montaña",
    Faction: "Clan del Dragón",
    Power: null,  // Lider cards have no Power
    Range: [],
    OnActivation: [
        {
            Effect: {
                Name: "Draw",
            },
            Selector: {
                Source: "deck",
                Single: true,
                Predicate: (target) => true
            }
        },
        {
            Effect: {
                Name: "Heal",
                Params: { amount: 2 }
            },
            Selector: {
                Source: "field",
                Single: true,
                Predicate: (target) => target.Power < 5
            }
        }
    ],
    PostAction: [
        {
            Effect: "Boost",
            Params: { amount: 3 },
            Selector: {
                Source: "field",
                Single: true,
                Predicate: (target) => target.Faction == "Clan del Dragón"
            }
        }
    ]
}

card {
    Type: "Clima",
    Name: "Huracán Despiadado",
    Faction: "Piratas del Viento",
    Power: null,  // Clima cards have no Power
    Range: ["Melee", "Ranged"],
    OnActivation: [
        {
            Effect: {
                Name: "Damage",
                Params: { amount: 4 }
            },
            Selector: {
                Source: "otherField",
                Single: false,
                Predicate: (target) => target.Faction != "Piratas del Viento"
            }
        }
    ],
}

card {
    Type: "Plata",
    Name: "Lanza de Fuego",
    Faction: "Hermanos de la Llama",
    Power: 7,
    Range: ["Melee", "Siege"],
    OnActivation: [
        {
            Effect: {
                Name: "Damage",
                Params: { amount: 2 }
            },
            Selector: {
                Source: "otherField",
                Single: true,
                Predicate: (target) => target.Power > 3
            }
        }
    ],
    PostAction: []
}

card {
    Type: "Plata",
    Name: "Caballero del Fénix",
    Faction: "Hermanos de la Llama",
    Power: 6,
    Range: ["Melee"],
    OnActivation: [
        {
            Effect: {
                Name: "Boost",
                Params: { amount: 4 }
            },
            Selector: {
                Source: "field",
                Single: true,
                Predicate: (target) => target.Power < 5 && target.Faction == "Hermanos de la Llama"
            }
        }
    ],
    PostAction: [
        {
            Effect: "Draw",
            Selector: {
                Source: "deck",
                Single: true,
                Predicate: (target) => true
            }
        }
    ]
}

card {
    Type: "Plata",
    Name: "Defensor de las Cenizas",
    Faction: "Hermanos de la Llama",
    Power: 9,
    Range: ["Siege"],
    OnActivation: [
        {
            Effect: {
                Name: "Heal",
                Params: { amount: 3 }
            },
            Selector: {
                Source: "field",
                Single: true,
                Predicate: (target) => target.Power < 5 && target.Faction == "Hermanos de la Llama"
            }
        }
    ],
}

card {
    Type: "Plata",
    Name: "Guerrero Incandescente",
    Faction: "Hermanos de la Llama",
    Power: 5,
    Range: ["Melee", "Ranged"],
    OnActivation: [
        {
            Effect: {
                Name: "Damage",
                Params: { amount: 1 }
            },
            Selector: {
                Source: "otherField",
                Single: false,
                Predicate: (target) => target.Power > 3
            }
        },
        {
            Effect: {
                Name: "Boost",
                Params: { amount: 2 }
            },
            Selector: {
                Source: "field",
                Single: true,
                Predicate: (target) => target.Faction == "Hermanos de la Llama"
            }
        }
    ],
    PostAction: []
}

card {
    Type: "Plata",
    Name: "Mago de la Llama Eterna",
    Faction: "Hermanos de la Llama",
    Power: 4,
    Range: ["Ranged"],
    OnActivation: [
        {
            Effect: {
                Name: "WeakenAll",
                Params: { amount: 2 }
            },
            Selector: {
                Source: "otherField",
                Single: false,
                Predicate: (target) => target.Faction != "Hermanos de la Llama"
            }
        }
    ],
    PostAction: []
}

card {
    Type: "Plata",
    Name: "Mago de la Llama Eterna",
    Faction: "Hermanos de la Llama",
    Power: 4,
    Range: ["Ranged"],
    OnActivation: [
        {
            Effect: {
                Name: "WeakenAll",
                Params: { amount: 2 }
            },
            Selector: {
                Source: "otherField",
                Single: false,
                Predicate: (target) => target.Faction != "Hermanos de la Llama"
            }
        }
    ],
    PostAction: []
}

card {
    Type: "Plata",
    Name: "Escudero del Fuego",
    Faction: "Hermanos de la Llama",
    Power: 5,
    Range: ["Siege"],
    OnActivation: [
        {
            Effect: {
                Name: "Boost",
                Params: { amount: 3 }
            },
            Selector: {
                Source: "field",
                Single: true,
                Predicate: (target) => target.Faction == "Hermanos de la Llama"
            }
        }
    ],
    PostAction: {
        {
            Effect: "Heal",
            Params: { amount: 2 },
            Selector: {
                Source: "field",
                Single: true,
                Predicate: (target) => target.Faction == "Hermanos de la Llama" && target.Power < 5
            }
        }
    ]
}

card {
    Type: "Plata",
    Name: "Cazador de las Sombras",
    Faction: "Hermanos de la Llama",
    Power: 7,
    Range: ["Melee", "Siege"],
    OnActivation: [
        {
            Effect: {
                Name: "Damage",
                Params: { amount: 3 }
            },
            Selector: {
                Source: "otherField",
                Single: true,
                Predicate: (target) => target.Power > 5
            }
        }
    ],
    PostAction:
        {
            Effect: "Draw",
            Selector: {
                Source: "deck",
                Single: true,
                Predicate: (target) => true
            }
        }

}